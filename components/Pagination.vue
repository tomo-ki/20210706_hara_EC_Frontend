<template>
  <div class="pagination flex-column">
  <!-- „Éö„Éº„Ç∏Êï∞„Åå1„Çà„ÇäÂ§ß„Åç„ÅÑ„ÄÅ2„Éö„Éº„Ç∏‰ª•‰∏ä„ÅÆÊôÇ„ÅÆ„Åø„Éö„Éº„Ç∏„Éç„Éº„Ç∑„Éß„É≥„ÇíË°®Á§∫ -->
    <div
      v-if="length > 1"
      class="list-item list-item-nav flex"
    >
      <button
        class="pagination-btn hover btn-prev"
        @click="changePage(`?${query}=${now - 1 || 1}`)"
        v-if="now!==1"
      >
        Êàª„Çã
      </button>
      <!-- 1„Éö„Éº„Ç∏ÁõÆ„ÅØ„Å©„Çì„Å™ÊôÇ„Åß„ÇÇÂõ∫ÂÆöË°®Á§∫„ÅÆ„Åü„ÇÅif‰∏çË¶Å -->
      <ul class="list flex">
        <!-- „ÇØ„É©„Çπ„Éê„Ç§„É≥„Éá„Ç£„É≥„Ç∞„ÄÅ{ classÂêç: Âºè }„Åßtrue„ÅÆÊôÇ„Å´„ÇØ„É©„Çπ„Åå„Å§„Åè -->
        <!-- 1„Éö„Éº„Ç∏„ÇíÊäº„Åô„Å®url„Åå~/1„Å´„Å™„Çã -->
        <li
          :class="{ now: now === 1 }"
          class="item item-link hover"
          @click="changePage(`?${query}=1`)"
        >
          <span class="text">
            1
          </span>
        </li>
        <!-- üåü„Åì„Åì„Åã„ÇâÂàÜÂ≤ê„ÄÅÊúÄÂ§ß„Éö„Éº„Ç∏Êï∞„Åå2„Çà„ÇäÂ§ß„Åç„ÅÑ3„Äú -->
        <template v-if="length > 2">
          <!-- 3‰ª•‰∏ä5‰ª•‰∏ã(=ÊúÄÂ§ß„Éö„Éº„Ç∏Êï∞3,4,5„ÅÆÊôÇ)
          5„Éö„Éº„Ç∏„Åæ„Åß„ÅÆÂ†¥Âêà„ÅØ„ÄÅÊúÄÂ§ß„Éö„Éº„Ç∏Êï∞„Å´Âøú„Åò„Å¶Ë©≤ÂΩì„Éö„Éº„Ç∏Êï∞„ÇíË°®Á§∫ -->
          <template v-if="length <= 5">
            <li
              :class="{ now: now === 2 }"
              class="item item-link hover"
              @click="changePage(`?${query}=2`)"
            >
              <span class="text">
                2
              </span>
            </li>
            <!-- ÊúÄÂ§ß„Éö„Éº„Ç∏Êï∞„Åå3, 4, 5„Åã„Å§3„Çà„ÇäÂ§ß„Åç„ÅÑ4, 5„ÅÆÊôÇ -->
            <template v-if="length > 3">
              <li
                :class="{ now: now === 3 }"
                class="item item-link hover"
                @click="changePage(`?${query}=3`)"
              >
                <span class="text">
                  3
                </span>
              </li>
              <!-- ÊúÄÂ§ß„Éö„Éº„Ç∏Êï∞„Åå3, 4, 5„Åã„Å§3„Çà„ÇäÂ§ß„Åç„ÅÑ4, 5„Åã„Å§4„Çà„ÇäÂ§ß„Åç„ÅÑ5„ÅÆÊôÇ -->
              <template v-if="length > 4">
                <li
                  :class="{ now: now === 4 }"
                  class="item item-link hover"
                  @click="changePage(`?${query}=4`)"
                >
                  <span class="text">
                    4
                  </span>
                </li>
              </template>
            </template>
          </template>
          <!-- „Åß„Å™„Åë„Çå„Å∞(=ÊúÄÂ§ß„Éö„Éº„Ç∏„Åå5„Çà„ÇäÂ§ß„Åç„ÅÑ6„Äú) -->
          <template v-else>
            <!-- ÊúÄÂ§ß„Éö„Éº„Ç∏6„Äú„Åã„Å§ÁèæÂú®„ÅÑ„Çã„Éö„Éº„Ç∏„Åå4„Çà„ÇäÂ∞ë„Å™„ÅÑ(=1, 2, 3„ÅÆÊôÇ) -->
            <template v-if="now < 4">
              <li
                :class="{ now: now === 2 }"
                class="item item-link hover"
                @click="changePage(`?${query}=2`)"
              >
                <span class="text">
                  2
                </span>
              </li>
              <li
                :class="{ now: now === 3 }"
                class="item item-link hover"
                @click="changePage(`?${query}=3`)"
              >
                <span class="text">
                  3
                </span>
              </li>
              <!-- ÁèæÂú®„ÅÑ„Çã„Éö„Éº„Ç∏„Åå4„Çà„ÇäÂ∞ë„Å™„ÅÑ„Åã„Å§„ÄÅ3„Éö„Éº„Ç∏ÁõÆ„Å´„ÅÑ„ÇãÊôÇ -->
              <li
                v-if="now === 3"
                class="item item-link hover"
                @click="changePage(`?${query}=4`)"
              >
                <span class="text">
                  4
                </span>
              </li>
              <li class="item item-dots flex">
                <div class="dot" />
                <div class="dot" />
                <div class="dot" />
              </li>
            </template>
            <!-- ÊúÄÂ§ß„Éö„Éº„Ç∏6„Äú„Åã„Å§ÁèæÂú®„ÅÑ„Çã„Éö„Éº„Ç∏„Åå1, 2, 3„Åß„Å™„Åè4„Åß„Äú
            ÁèæÂú®„ÅÑ„Çã„Éö„Éº„Ç∏„Å´2„ÇíÂá∫„Åó„Å¶„ÇÇÊúÄÂ§ß„Éö„Éº„Ç∏Êï∞„Å®Âêå„Åò„ÅãÂ∞ë„Å™„Åë„Çå„Å∞
            (4„Éö„Éº„Ç∏ÁõÆ„Å´„ÅÑ„Çã„Å™„Çâ4 + 2„ÄÅÊúÄÂ§ß„Éö„Éº„Ç∏7„ÅÆÊñπ„ÅåÂ§ß„Åç„ÅÑ„Åü„ÇÅfalse)
            (6„Éö„Éº„Ç∏ÁõÆ„Å´„ÅÑ„Çã„Å™„Çâ6 + 2„ÄÅÊúÄÂ§ß„Éö„Éº„Ç∏7„Çà„ÇäÂ§ß„Åç„ÅÑ„Åü„ÇÅtrue) -->
            <template v-else-if="length <= now + 2">
              <li class="item item-dots flex">
                <div class="dot" />
                <div class="dot" />
                <div class="dot" />
              </li>
              <!-- ÊúÄÂ§ß„Éö„Éº„Ç∏Êï∞„Åã„Çâ2„ÇíÂºï„ÅÑ„ÅüÊï∞Â≠ó„ÅåÁèæÂú®„ÅÑ„Çã„Éö„Éº„Ç∏„Å†„Å£„Åü„Çâ
              ÊúÄÂ§ß„Éö„Éº„Ç∏Êï∞„Åã„Çâ3„ÇíÂºï„ÅÑ„Åü„Éö„Éº„Ç∏Êï∞„ÇíË°®Á§∫„Åï„Åõ„Çã
              (5„Éö„Éº„Ç∏ÁõÆ„Å´„ÅÑ„Çã„Å™„Çâ7-2 =5„Åßtrue„ÄÅ7-3 =4„ÅåË°®Á§∫„Åï„Çå„Çã) -->
              <li
                v-if="now === length - 2"
                class="item item-link hover"
                @click="changePage(`?${query}=${length - 3}`)"
              >
                <span class="text">
                  {{ length - 3 }}
                </span>
              </li>
              <li
                :class="{ now: now === length - 2 }"
                class="item item-link hover"
                @click="changePage(`?${query}=${length - 2}`)"
              >
                <span class="text">
                  {{ length - 2 }}
                </span>
              </li>
              <li
                :class="{ now: now === length - 1 }"
                class="item item-link hover"
                @click="changePage(`?${query}=${length - 1}`)"
              >
                <span class="text">
                  {{ length - 1 }}
                </span>
              </li>
            </template>
            <!-- ÊúÄÂ§ß„Éö„Éº„Ç∏6„Äú„Åã„Å§„ÄÅ‰ªä„Åæ„Åß„ÅÆ„Éë„Çø„Éº„É≥„Å´Ë©≤ÂΩì„Åó„Å™„ÅÑ
            (‰∏ä„ÅÆüê•„ÅÆfalse„ÄÅÁèæÂú®4„Éö„Éº„Ç∏„ÅÆÂ†¥Âêà) -->
            <template v-else>
              <li class="item item-dots flex">
                <div class="dot" />
                <div class="dot" />
                <div class="dot" />
              </li>
              <li
                class="item item-link hover"
                @click="changePage(`?${query}=${now - 1}`)"
              >
                <span class="text">
                  {{ now - 1 }}
                </span>
              </li>
              <li class="item item-link hover now">
                <span class="text">
                  {{ now }}
                </span>
              </li>
              <li
                class="item item-link hover"
                @click="changePage(`?${query}=${now + 1}`)"
              >
                <span class="text">
                  {{ now + 1 }}
                </span>
              </li>
              <li class="item item-dots flex">
                <div class="dot" />
                <div class="dot" />
                <div class="dot" />
              </li>
            </template>
          </template>
        </template>
        <li
          :class="{ now: now === length }"
          class="item item-link hover"
          @click="changePage(`?${query}=${length}`)"
        >
          <span class="text">
            {{ length }}
          </span>
        </li>
      </ul>
      <button
        class="pagination-btn hover btn-next"
        @click="changePage(`?${query}=${now + 1 <= length ? now + 1 : length}`)"
        v-if="now!==length"
      >
        Ê¨°„Å∏
      </button>
    </div>
  </div>
</template>

<script>
export default {
  props: {
    query: {
      type: String,
      required: true,
    },
    length: {
      type: Number,
      required: true,
    },
    now: {
      type: Number,
      required: true,
    },
  },
  methods: {
    changePage(pageQuery){
      if( pageQuery !== `?pages=${this.now}`){
        this.$router.push(pageQuery);
        this.$parent('changePage');
      }
    }
  }
}
</script>

<style scoped>
.pagination{
  width: 100%;
  margin: 30px 0;
  align-items: center;
}
.item-link, .pagination-btn{
  border: 2px solid rgb(105, 159, 24);
  border-radius: 15px;
  background-color: white;
  width: 60px;
  height: 30px;
  text-align: center;
  margin: 0 5px;
  font-size: 14px;
}
.item-link{
  line-height: 30px;
}
.now{
  background-color: rgb(105, 159, 24);
  color: white;
}
.item-dots{
  align-items: flex-end;
  justify-content: space-between;
  width: 20px;
  height: 30px;
  margin: 0 10px;
  padding: 5px 0;
  font-size: 14px;
}
.dot{
  width: 3px;
  height: 3px;
  border-radius: 50%;
  background-color: black;
}

</style>